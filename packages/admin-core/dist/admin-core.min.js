/*!
 * admin-core.min.js v1.1.9
 * (c) 2019-2020 LiLiang
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).adminCore={})}(this,(function(e){"use strict";var n=function(e,r){return(e+"").length<r?n("0"+e,r):e},r=function(e,r){if(void 0===r&&(r="yyyy-MM-dd HH:mm:ss"),!e)return"";e instanceof Date||(e=new Date(e));var t=e.getFullYear(),o=e.getMonth()+1,u=e.getDate(),i=e.getDay(),c=e.getHours(),a=e.getMinutes(),d=e.getSeconds(),f=e.getMilliseconds(),l=e.getTimezoneOffset(),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],p=m.map((function(e){return e.slice(0,3)})),g=s.map((function(e){return e.slice(0,3)}));return r.replace(/yyyy/g,(function(){return t})).replace(/yy/g,(function(){return(t+"").slice(2)})).replace(/MMMM/g,(function(){return m[o-1]})).replace(/MMM/g,(function(){return p[o-1]})).replace(/MM/g,(function(){return n(o,2)})).replace(/M/g,(function(){return o})).replace(/dddd/g,(function(){return s[i]})).replace(/ddd/g,(function(){return g[i]})).replace(/dd/g,(function(){return n(u,2)})).replace(/d/g,(function(){return u})).replace(/DD/g,(function(){return"0"+i})).replace(/D/g,(function(){return i})).replace(/HH/g,(function(){return n(c,2)})).replace(/H/g,(function(){return c})).replace(/hh/g,(function(){return n(c>12?c-12:c,2)})).replace(/h/g,(function(){return c>12?c-12:c})).replace(/mm/g,(function(){return n(a,2)})).replace(/m/g,(function(){return a})).replace(/ss/g,(function(){return n(d,2)})).replace(/s/g,(function(){return d})).replace(/SSS/g,(function(){return n(f,3)})).replace(/SS/g,(function(){return n(Math.round(f/10),2)})).replace(/S/g,(function(){return Math.round(f/100)})).replace(/A/g,(function(){return c>12?"PM":"AM"})).replace(/a/g,(function(){return c>12?"pm":"am"})).replace(/ZZ/g,(function(){return(l>0?"-":"+")+n(100*Math.floor(Math.abs(l)/60)+Math.abs(l)%60,4)}))},t=function(e,n){for(var r=e.$parent;r;){if(r.$options.name===n)return r;r=r.$parent}},o=function(e,n){return(n?e.$children.filter((function(e){return e.$options.name===n})):e.$children).reduce((function(e,r){return e.concat([r],r.$children.length?o(r,n):[])}),[])},u=function(e,n){for(var r=0,t="",o=0,u=e.length;o<u;o++){var i=e.charAt(o),c=r+i.replace(/[^\x00-\xff]/g,"**").length;if(c>n)return t;t+=i,r=c}return t},i=function(e){return e&&isNaN(e)?e:+e+"px"},c=function(e){return function(){return e.resolve("hash"===e.mode?location.hash.slice(1):location.pathname).route}},a=/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,d=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,f=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\:([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,l=function(e){void 0===e&&(e={});var n=e.trigger;void 0===n&&(n=null);var r=e.required;void 0===r&&(r=!0);var t=e.port,o=t?"（含端口号）":"",u=e.msg||"请输入IP地址"+o,i=e.regmsg||"请输入合法的IP地址"+o;return[{trigger:n,required:r,validator:function(n,o,c){o?(t?f:d).test(o)?e.remoteMethod?e.remoteMethod(n,o,c):c():c(new Error(i)):r?c(new Error(u)):c()}}]},s=function(e){void 0===e&&(e={});var n=e.trigger;void 0===n&&(n=null);var r=e.required;return void 0===r&&(r=!0),[{trigger:n,required:r,validator:function(n,t,o){t?a.test(t)?e.remoteMethod?e.remoteMethod(n,t,o):o():o(new Error(e.regmsg||"请输入合法的端口号")):r?o(new Error(e.msg||"请输入端口号")):o()}}]},m=Object.freeze({__proto__:null,formatDate:r,getParentComponent:t,getChildComponents:o,getSubStr:u,getRoute:c,getSize:i,createIpRule:l,createPortRule:s});var p=function(e,n){return e.forEach((function(e){var r=n?n+"/"+e.path:e.path;e.meta?e.meta.key=r:e.meta={key:r},e.children&&p(e.children,r)})),e},g=function(e,n){var r=function(t,o){var u=t.meta.permissionTag;u&&n.indexOf(u)<0?o?o.children.splice(o.children.indexOf(t),1,null):e.splice(e.indexOf(o),1):t.children&&(t.children.forEach((function(e){return r(e,t)})),t.children=t.children.filter((function(e){return e})))};return n&&e.forEach((function(e){return r(e)})),p(e)},h=function(e){var n=[],r=function(e,t){e.forEach((function(e){e.children;var o=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(r[t]=e[t]);return r}(e,["children"]);e.meta&&e.meta.notMenu||(t?t.children?t.children.push(o):t.children=[o]:n.push(o),e.children&&r(e.children,o))}))};return r(e),n},M=function(e,n,r){return function(t,o){return Promise.all(Object.keys(t).map((function(u,i){return function(t,o,u){return void 0===u&&(u=1e3),t().then((function(t){var i=t.default;("function"==typeof i&&(i=i({Vue:e,store:n,router:r})),i.store&&n.registerModule(i.name,i.store),i.routes&&(i.routes.forEach((function(e){e.meta?e.meta.index=u:e.meta={index:u}})),n.commit("core/ADD_MENUS",g(i.routes,o))),!n.state.homeComponent&&i.home&&i.home.component)&&((!i.home.permissionTag||o&&o.indexOf(i.home.permissionTag)>-1)&&n.commit("core/SET_HOME_COMPONENT",i.home.component))}))}(t[u],o,i).catch((function(){return console.log("模块: "+u+" 加载失败")}))})))}},v=function(e,n){var r=n.store,t=n.router;r.registerModule("core",function(e){return{namespaced:!0,state:{modal:{},routes:[],menus:[],homeComponent:null},mutations:{SHOW_MODAL:function(e,n){void 0===n&&(n={}),e.modal=Object.assign({},e.modal,n)},ADD_MENUS:function(n,r){e.addRoutes(r),n.routes=n.routes.concat(r),n.menus=n.menus.concat(h(r)),n.menus.sort((function(e,n){var r=e.meta.index,t=n.meta.index;return r>t?1:r<t?-1:0}))},SET_HOME_COMPONENT:function(e,n){e.homeComponent=n}},actions:{HIDE_ACTIVE_MODAL:function(e){var n=e.state,r=e.commit;return new Promise((function(e,t){var o,u=Object.keys(n.modal).filter((function(e){return n.modal[e]})),i=u.length;if(i)return r("SHOW_MODAL",((o={})[u[i-1]]=!1,o)),e();t()}))}}}}(t)),e.prototype.$adminCore=Object.assign({},m,{filterRoutes:g,getRoute:c(t),moduleLoader:M(e,r,t)})},y=function(e,n){var r,t;void 0===n&&(n="");var o="visible",u="onShow";return n&&(o=n.toLowerCase()+"Visible",u="on"+(n[0].toUpperCase()+n.slice(1).toLowerCase())+"Show"),{computed:(r={},r[o]=function(){return this.$store.state.core.modal[e]},r),methods:(t={},t[u]=function(n){var r;this.$store.commit("core/SHOW_MODAL",((r={})[e]=n,r))},t)}};v.navModal=y,e.createIpRule=l,e.createPortRule=s,e.default=v,e.filterRoutes=g,e.formatDate=r,e.getChildComponents=o,e.getParentComponent=t,e.getRoute=c,e.getSize=i,e.getSubStr=u,e.navModal=y,Object.defineProperty(e,"__esModule",{value:!0})}));
