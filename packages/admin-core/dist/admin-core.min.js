/*!
 * admin-core.min.js v1.2.5
 * (c) 2019-2020 LiLiang
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).adminCore={})}(this,(function(e){"use strict";var t=function(e,n){return(e+"").length<n?t("0"+e,n):e},n=function(e,n){if(void 0===n&&(n="yyyy-MM-dd HH:mm:ss"),!e)return"";e instanceof Date||(e=new Date(e));var r=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),u=e.getDay(),a=e.getHours(),d=e.getMinutes(),c=e.getSeconds(),s=e.getMilliseconds(),m=e.getTimezoneOffset(),f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"],g=l.map((function(e){return e.slice(0,3)})),h=f.map((function(e){return e.slice(0,3)})),p=function(e){return function(){return e}};return[[/yyyy/g,p(r)],[/yy/g,p((r+"").slice(2))],[/MMMM/g,p(l[o-1])],[/MMM/g,p(g[o-1])],[/MM/g,p(t(o,2))],[/M/g,p(o)],[/dddd/g,p(f[u])],[/ddd/g,p(h[u])],[/dd/g,p(t(i,2))],[/d/g,p(i)],[/DD/g,p("0"+u)],[/D/g,p(u)],[/HH/g,p(t(a,2))],[/H/g,p(a)],[/hh/g,p(t(a>12?a-12:a,2))],[/h/g,p(a>12?a-12:a)],[/mm/g,p(t(d,2))],[/m/g,t(d,2)],[/ss/g,p(t(c,2))],[/s/g,p(c)],[/SSS/g,p(t(s,3))],[/SS/g,p(t(Math.round(s/10),2))],[/S/g,p(Math.round(s/100))],[/A/g,p(a>12?"PM":"AM")],[/a/g,p(a>12?"pm":"am")],[/ZZ/g,p((m>0?"-":"+")+t(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4))]].reduce((function(e,t){return e.replace(t[0],t[1])}),n)},r=function(e,t){var n=e.$parent;return n&&(n.$options.name===t?n:r(n,t))},o=function(e,t,n){return e.$children.reduce((function(e,r){return t&&r.$options.name!==t||(e.push(r),!t||!n)?e.concat(r.$children.length?o(r,t,n):[]):e}),[])},i=function(e,t){for(var n=0,r="",o=0,i=e.length;o<i;o++){var u=e.charAt(o),a=n+u.replace(/[^\x00-\xff]/g,"**").length;if(a>t)return r;r+=u,n=a}return r},u=function(e){return e&&isNaN(e)?e:+e+"px"},a=function(e){return function(){return e.resolve("hash"===e.mode?location.hash.slice(1):location.pathname).route}},d=/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,c=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\:([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,m=function(e){void 0===e&&(e={});var t=e.trigger;void 0===t&&(t=null);var n=e.required;void 0===n&&(n=!0);var r=e.port,o=r?"（含端口号）":"",i=e.msg||"请输入IP地址"+o,u=e.regmsg||"请输入合法的IP地址"+o;return[{trigger:t,required:n,validator:function(t,o,a){o?(r?s:c).test(o)?e.remoteMethod?e.remoteMethod(t,o,a):a():a(new Error(u)):n?a(new Error(i)):a()}}]},f=function(e){void 0===e&&(e={});var t=e.trigger;void 0===t&&(t=null);var n=e.required;return void 0===n&&(n=!0),[{trigger:t,required:n,validator:function(t,r,o){r?d.test(r)?e.remoteMethod?e.remoteMethod(t,r,o):o():o(new Error(e.regmsg||"请输入合法的端口号")):n?o(new Error(e.msg||"请输入端口号")):o()}}]},l=Object.freeze({__proto__:null,formatDate:n,getParentComponent:r,getChildComponents:o,getSubStr:i,getRoute:a,getSize:u,createIpRule:m,createPortRule:f});function g(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var h=function(e,t){return e.forEach((function(e){var n=t?t+"/"+e.path:e.path;e.meta?e.meta.key=n:e.meta={key:n},e.children&&h(e.children,n)})),e},p=function(e,t){var n=[],r=function(e,o){e.forEach((function(e){var i=e.children,u=g(e,["children"]),a=e.meta&&e.meta.permissionTag;(!a||t.indexOf(a)>-1)&&(o?o.children?o.children.push(u):o.children=[u]:n.push(u),i&&r(i,u))}))};return t?(r(e),h(n)):h(e)},v=function(e){return{namespaced:!0,state:{modal:{},routes:[],menus:[],homeComponent:null},mutations:{SHOW_MODAL:function(e,t){void 0===t&&(t={}),e.modal=Object.assign({},e.modal,t)},ADD_MENUS:function(t,n){e.addRoutes(n),t.routes=t.routes.concat(n),t.menus=t.menus.concat(function(e){var t=[],n=function(e,r){e.forEach((function(e){e.children;var o=g(e,["children"]);e.meta&&e.meta.notMenu||(r?r.children?r.children.push(o):r.children=[o]:t.push(o),e.children&&n(e.children,o))}))};return n(e),t}(n)),t.menus.sort((function(e,t){var n=e.meta.index,r=t.meta.index;return n>r?1:n<r?-1:0}))},SET_HOME_COMPONENT:function(e,t){e.homeComponent=t}},actions:{HIDE_ACTIVE_MODAL:function(e){var t=e.state,n=e.commit;return new Promise((function(e,r){var o,i=Object.keys(t.modal).filter((function(e){return t.modal[e]})),u=i.length;if(u)return n("SHOW_MODAL",((o={})[i[u-1]]=!1,o)),e();r()}))}}}},M=function(e,t,n){return function(r,o){return Promise.all(Object.keys(r).map((function(i,u){return function(r,o,i){return void 0===i&&(i=1e3),r().then((function(r){var u=r.default;("function"==typeof u&&(u=u({Vue:e,store:t,router:n})),u.store&&t.registerModule(u.name,u.store),u.routes&&(u.routes.forEach((function(e){e.meta?e.meta.index=i:e.meta={index:i}})),t.commit("core/ADD_MENUS",p(u.routes,o))),!t.state.homeComponent&&u.home&&u.home.component)&&((!u.home.permissionTag||o&&o.indexOf(u.home.permissionTag)>-1)&&t.commit("core/SET_HOME_COMPONENT",u.home.component))}))}(r[i],o,u).catch((function(){return console.log("模块: "+i+" 加载失败")}))})))}},y=function(e,t){var n=t.store,r=t.router;n.registerModule("core",v(r)),e.prototype.$adminCore=Object.assign({},l,{filterRoutes:p,getRoute:a(r),moduleLoader:M(e,n,r)})},O=function(e,t){var n,r;void 0===t&&(t="");var o="visible",i="onShow";return t&&(o=t.toLowerCase()+"Visible",i="on"+(t[0].toUpperCase()+t.slice(1).toLowerCase())+"Show"),{computed:(n={vnodeTag:function(){return this.$vnode.tag}},n[o]=function(){return this.$store.state.core.modal[this.vnodeTag]},n),methods:(r={},r[i]=function(e){var t;this.$store.commit("core/SHOW_MODAL",((t={})[this.vnodeTag]=e,t))},r)}};y.navModal=O,e.createIpRule=m,e.createPortRule=f,e.default=y,e.filterRoutes=p,e.formatDate=n,e.getChildComponents=o,e.getParentComponent=r,e.getRoute=a,e.getSize=u,e.getSubStr=i,e.navModal=O,Object.defineProperty(e,"__esModule",{value:!0})}));
