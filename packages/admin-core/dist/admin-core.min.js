/*!
 * admin-core.min.js v2.0.0
 * (c) 2019-2021 LiLiang
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e=e||self).adminCore={},e.Vue)}(this,(function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n=function(e,t){return(e+"").length<t?n("0"+e,t):e},r=function(e,t){if(void 0===t&&(t="yyyy-MM-dd HH:mm:ss"),!e||!(e+"").trim())return"";if(!(e instanceof Date)){var r=new Date(e);if(isNaN(r)){if(r=new(Function.prototype.bind.apply(Date,[null].concat((e+"").split(/-|:|\s/g).map((function(e){return+e}))))),isNaN(r))return e;r.setMonth(r.getMonth()-1)}e=r}var o=e.getFullYear(),u=e.getMonth()+1,a=e.getDate(),i=e.getDay(),d=e.getHours(),c=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds(),f=e.getTimezoneOffset(),g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=p.map((function(e){return e.slice(0,3)})),h=g.map((function(e){return e.slice(0,3)})),v=function(e){return function(){return e}};return[[/yyyy/g,v(o)],[/yy/g,v((o+"").slice(2))],[/MMMM/g,v(p[u-1])],[/MMM/g,v(m[u-1])],[/MM/g,v(n(u,2))],[/M/g,v(u)],[/dddd/g,v(g[i])],[/ddd/g,v(h[i])],[/dd/g,v(n(a,2))],[/d/g,v(a)],[/DD/g,v("0"+i)],[/D/g,v(i)],[/HH/g,v(n(d,2))],[/H/g,v(d)],[/hh/g,v(n(d>12?d-12:d,2))],[/h/g,v(d>12?d-12:d)],[/mm/g,v(n(c,2))],[/m/g,n(c,2)],[/ss/g,v(n(s,2))],[/s/g,v(s)],[/SSS/g,v(n(l,3))],[/SS/g,v(n(Math.round(l/10),2))],[/S/g,v(Math.round(l/100))],[/A/g,v(d>12?"PM":"AM")],[/a/g,v(d>12?"pm":"am")],[/ZZ/g,v((f>0?"-":"+")+n(100*Math.floor(Math.abs(f)/60)+Math.abs(f)%60,4))]].reduce((function(e,t){return e.replace(t[0],t[1])}),t)},o=function(e,t){var n=e.$parent;return n&&(n.$options.name===t?n:o(n,t))},u=function(e,t,n){var r=function(e){return e.$children.length>0},o=function(e){return e.$options.name===t},u=function(e){return function(t){return t.$children.reduce(e,[])}},a=u(t?n?function(e,t){return e.concat(o(t)?[t]:[],r(t)?a(t):[])}:function(e,t){return e.concat(o(t)?[t]:r(t)?a(t):[])}:function(e,t){return e.concat([t],r(t)?a(t):[])});return a(e)},a=function(e){return function(){return e.resolve("hash"===e.mode?location.hash.slice(1):location.pathname).route}},i=/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,d=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,c=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\:([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,s=function(e){void 0===e&&(e={});var t=e.trigger;void 0===t&&(t=null);var n=e.required;void 0===n&&(n=!0);var r=e.port,o=r?"（含端口号）":"",u=e.msg||"请输入IP地址"+o,a=e.regmsg||"请输入合法的IP地址"+o;return{trigger:t,required:n,validator:function(t,o,i){o?(r?c:d).test(o)?e.callback?e.callback(t,o,i):i():i(new Error(a)):n?i(new Error(u)):i()}}},l=function(e){void 0===e&&(e={});var t=e.trigger;void 0===t&&(t=null);var n=e.required;return void 0===n&&(n=!0),{trigger:t,required:n,validator:function(t,r,o){r?i.test(r)?e.callback?e.callback(t,r,o):o():o(new Error(e.regmsg||"请输入合法的端口号")):n?o(new Error(e.msg||"请输入端口号")):o()}}},f=Object.freeze({__proto__:null,formatDate:r,getParentComponent:o,getChildComponents:u,getRoute:a,createIpRule:s,createPortRule:l});function g(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var p=function(e){return"string"==typeof e},m=function(e){return"function"==typeof e},h=function(e,t){return e.forEach((function(e){var n=t?t+"/"+e.path:e.path;e.meta?e.meta.key=n:e.meta={key:n},e.children&&h(e.children,n)})),e},v=function(e,t){var n=[],r=function(e,o){e.forEach((function(e){var u=e.children,a=g(e,["children"]),i=e.meta&&e.meta.permissionTag;i&&!t.includes(i)||(o?o.children?o.children.push(a):o.children=[a]:n.push(a),u&&r(u,a))}))};return t?(r(e),h(n)):h(e)},y=t.observable([]),M=function(){return y},b=function(e,t){m(t.addRoute)?e.forEach((function(e){t.addRoute(e)})):t.addRoutes(e),y.push.apply(y,function(e){var t=[],n=function(e,r){e.forEach((function(e){var o=e.children,u=g(e,["children"]);u.meta&&u.meta.notMenu||(r?r.children?r.children.push(u):r.children=[u]:t.push(u),o&&n(o,u))}))};return n(e),t}(e)),y.sort((function(e,t){return e.meta.index-t.meta.index}))},w=function(e){void 0===e&&(e={});var n=e.store,r=e.router,o=function(e,o,u){var a,i;return void 0===u&&(u=1e3),(p(e)?(i=p(a=e)?a:a[Object.keys(a)[0]],new Promise((function(e,t){var n=document.createElement("script");n.onload=function(){var r=function(e){var t=e.split("/"),n=t.pop();return n.startsWith("index.")&&(n=t.pop()||n),n.split(".")[0]}(i),o=window[r];o?e(o):t(new Error("The exported name <"+r+"> was not found")),n.onload=n.onerror=null,n=null},n.onerror=t,n.src=i,document.body.appendChild(n)}))):e()).then((function(e){var a=e.default,i=m(a)?a(t,n,r):a;i.store&&n.registerModule(i.name,i.store),i.routes&&(i.routes.forEach((function(e){e.meta?e.meta.index=u:e.meta={index:u}})),b(v(i.routes,o),r))}))};return function(e,t){return Promise.all(Object.keys(e).map((function(n,r){return o(e[n],t,r).catch((function(e){console.warn("Module load error: "+e.message)}))})))}};e.addMenus=b,e.createIpRule=s,e.createPortRule=l,e.default=function(e,t){var n=t.store,r=t.router;e.prototype.$adminCore=Object.assign({},f,{filterRoutes:v,addMenus:function(e){return b(e,r)},getMenus:M,getRoute:a(r),moduleLoader:w({store:n,router:r})})},e.filterRoutes=v,e.formatDate=r,e.getChildComponents=u,e.getMenus=M,e.getParentComponent=o,e.getRoute=a,e.moduleLoader=w,Object.defineProperty(e,"__esModule",{value:!0})}));
